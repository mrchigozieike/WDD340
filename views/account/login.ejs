<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>
    <div class="container">
        <h2>
            <%= title %>
        </h2>

        <!-- CSE Motor Login Form -->
        <div class="form-container">
            <%- messages() %>
                <form id="loginForm" action="../account/login" method="post">
                    <fieldset>
                        <div class="form-group">
                            <label for="account_email">Email Address:</label>
                            <input type="email" id="account_email" name="account_email" required
                                value="<%= locals.account_email %>">
                        </div>
                        <div class="form-group">
                            <label for="account_password">Password:</label>
                            <input type="password" name="account_password" id="account_password" required
                                pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$">
                            <p><i>Password must be a minimum of 12 characters and include 1 capital letter, 1 number and
                                    1
                                    special character.</i></p>
                            <button type="button" id="togglePassword" aria-label="Toggle password visibility">Show
                                Password</button>
                        </div>
                        <button class="form-button" type="submit">Login</button>
                    </fieldset>
                </form>

                <!-- If not registered -- Registration Link -->
                <p class="account-reg"><b>No account? <a href="/account/register">Sign-up</a></b></p>

        </div>

    </div>

    <script>
        const pswdBtn = document.querySelector("#togglePassword");
        pswdBtn.addEventListener("click", function () {
            const pswdInput = document.getElementById("account_password");
            const type = pswdInput.getAttribute("type");
            if (type == "password") {
                pswdInput.setAttribute("type", "text");
                pswdBtn.innerHTML = "Hide Password";
            } else {
                pswdInput.setAttribute("type", "password");
                pswdBtn.innerHTML = "Show Password";
            }
        });
    </script>

</html>