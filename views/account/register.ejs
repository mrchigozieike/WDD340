<% if (title) { %>
    <h1><%= title %></h1>
    <% } else { res.redirect('/') } %> <%- messages() %> <% if (errors) { %>
    <ul class="notice">
      <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
      <% }) %>
    </ul>
    <% } %>
    
    <div class="form-container">
      <p><b>All Fields are required.</b></p>
      <form action="/account/register" method="post"></form>
        <fieldset>
          <div class="form-group">
            <label for="account_firstname">First Name:</label>
            <input
              type="text"
              name="account_firstname"
              id="account_firstname"
              required
              value="<%= locals.account_firstname %>"
            />
          </div>
          <div class="form-group">
            <label for="account_lastname">Last Name:</label>
            <input
              type="text"
              name="account_lastname"
              id="account_lastname"
              required
              autocomplete="family-name"
              value="<%= locals.account_lastname %>"
            />
          </div>
          <div class="form-group">
            <label for="email">Email Address:</label>
            <input
              type="email"
              name="account_email"
              required
              placeholder="abc@myemail.com"
              autocomplete="email"
              value="<%= locals.account_email %>"
            />
          </div>
          <div class="form-group">
            <label for="password">Password:</label>
            <input
              type="password"
              name="account_password"
              id="password"
              required
              pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
              title="Password must be at least 12 characters, contain at least one uppercase letter, one number, and one special character."
            />
            <p>
              <i
                >Password must be a minimum of 12 characters and include 1 capital
                letter, 1 number and 1 special character.</i
              >
            </p>
            <button
              type="button"
              id="togglePassword"
              aria-label="Toggle password visibility"
            >
              Show Password
            </button>
          </div>
          <input class="form-button" type="submit" value="Register" />
        </fieldset>
      </form>
    </div>
    <script>
      const pswdBtn = document.querySelector("#togglePassword");
      pswdBtn.addEventListener("click", function () {
        const pswdInput = document.getElementById("password");
        const type = pswdInput.getAttribute("type");
        if (type == "password") {
          pswdInput.setAttribute("type", "text");
          pswdBtn.innerHTML = "Hide Password";
        } else {
          pswdInput.setAttribute("type", "password");
          pswdBtn.innerHTML = "Show Password";
        }
      });
    </script>